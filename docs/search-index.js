crystal_doc_search_index_callback({"repository_name":"stumpy_bmp","body":"# stumpy_bmp\n\nTODO: Write a description here\n\n## Installation\n\nAdd this to your application's `shard.yml`:\n\n```yaml\ndependencies:\n  stumpy_bmp:\n    github: stumpycr/stumpy_bmp\n```\n\n## Usage\n\n```crystal\nrequire \"stumpy_bmp\"\n```\n\nTODO: Write usage instructions here\n\n## Development\n\nTODO: Write development instructions here\n\n## Contributing\n\n1. Fork it ( https://github.com/stumpycr/stumpy_bmp/fork )\n2. Create your feature branch (git checkout -b my-new-feature)\n3. Commit your changes (git commit -am 'Add some feature')\n4. Push to the branch (git push origin my-new-feature)\n5. Create a new Pull Request\n\n## Contributors\n\n- [redcodefinal](https://github.com/redcodefinal) Ian Rash - creator, maintainer\n- [l3kn](https://github.com/l3kn) Leon Rische - maintainer\n- [reiswindy](https://github.com/reiswindy) reiswindy - contributor\n","program":{"html_id":"stumpy_bmp/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"stumpy_bmp","program":true,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"stumpy_bmp/StumpyBMP","path":"StumpyBMP.html","kind":"module","full_name":"StumpyBMP","name":"StumpyBMP","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/stumpy_bmp.cr","line_number":4,"url":null},{"filename":"src/stumpy_bmp/version.cr","line_number":1,"url":null}],"repository_name":"stumpy_bmp","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[{"id":"FILE_HEADER_RANGE","name":"FILE_HEADER_RANGE","value":"(0..13)","doc":null,"summary":null},{"id":"FILE_IDENT_HEADER","name":"FILE_IDENT_HEADER","value":"\"BM\"","doc":null,"summary":null},{"id":"FILE_IDENT_HEADER_RANGE","name":"FILE_IDENT_HEADER_RANGE","value":"(0..1)","doc":null,"summary":null},{"id":"FILE_OFFSET_RANGE","name":"FILE_OFFSET_RANGE","value":"(10..13)","doc":null,"summary":null},{"id":"FILE_RS1_RANGE","name":"FILE_RS1_RANGE","value":"(6..7)","doc":null,"summary":null},{"id":"FILE_RS2_RANGE","name":"FILE_RS2_RANGE","value":"(8..9)","doc":null,"summary":null},{"id":"FILE_SIZE_RANGE","name":"FILE_SIZE_RANGE","value":"(2..5)","doc":null,"summary":null},{"id":"IMAGE_BITS_RANGE","name":"IMAGE_BITS_RANGE","value":"(28..29)","doc":null,"summary":null},{"id":"IMAGE_COLOR_NUMBERS_RANGE","name":"IMAGE_COLOR_NUMBERS_RANGE","value":"(46..49)","doc":null,"summary":null},{"id":"IMAGE_COLOR_PLANES_RANGE","name":"IMAGE_COLOR_PLANES_RANGE","value":"(26..27)","doc":null,"summary":null},{"id":"IMAGE_COMPRESSION","name":"IMAGE_COMPRESSION","value":"0","doc":null,"summary":null},{"id":"IMAGE_COMPRESSION_RANGE","name":"IMAGE_COMPRESSION_RANGE","value":"(30..33)","doc":null,"summary":null},{"id":"IMAGE_HEADER_RANGE","name":"IMAGE_HEADER_RANGE","value":"(14..53)","doc":null,"summary":null},{"id":"IMAGE_HEADER_SIZE","name":"IMAGE_HEADER_SIZE","value":"40","doc":null,"summary":null},{"id":"IMAGE_HEADER_SIZE_RANGE","name":"IMAGE_HEADER_SIZE_RANGE","value":"(14..17)","doc":null,"summary":null},{"id":"IMAGE_HEIGHT_RANGE","name":"IMAGE_HEIGHT_RANGE","value":"(22..25)","doc":null,"summary":null},{"id":"IMAGE_IMPORTANT_COLORS_RANGE","name":"IMAGE_IMPORTANT_COLORS_RANGE","value":"(50..53)","doc":null,"summary":null},{"id":"IMAGE_RESOLUTION_X_RANGE","name":"IMAGE_RESOLUTION_X_RANGE","value":"(38..41)","doc":null,"summary":null},{"id":"IMAGE_RESOLUTION_Y_RANGE","name":"IMAGE_RESOLUTION_Y_RANGE","value":"(42..45)","doc":null,"summary":null},{"id":"IMAGE_SIZE_RANGE","name":"IMAGE_SIZE_RANGE","value":"(34..37)","doc":null,"summary":null},{"id":"IMAGE_WIDTH_RANGE","name":"IMAGE_WIDTH_RANGE","value":"(18..21)","doc":null,"summary":null},{"id":"TWO_E_16","name":"TWO_E_16","value":"1.to_u32 << 16","doc":null,"summary":null},{"id":"TWO_E_24","name":"TWO_E_24","value":"1.to_u32 << 24","doc":null,"summary":null},{"id":"TWO_E_8","name":"TWO_E_8","value":"1.to_u32 << 8","doc":null,"summary":null},{"id":"VERSION","name":"VERSION","value":"{{ (`shards version \\\"/home/drhuffman/_tmp_/github/drhuffman12/stumpy_bmp/src/stumpy_bmp\\\"`).chomp.stringify }}","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"bit16_to_int(bit16_chars)-class-method","html_id":"bit16_to_int(bit16_chars)-class-method","name":"bit16_to_int","doc":null,"summary":null,"abstract":false,"args":[{"name":"bit16_chars","doc":null,"default_value":"","external_name":"bit16_chars","restriction":""}],"args_string":"(bit16_chars)","args_html":"(bit16_chars)","location":{"filename":"src/stumpy_bmp.cr","line_number":162,"url":null},"def":{"name":"bit16_to_int","args":[{"name":"bit16_chars","doc":null,"default_value":"","external_name":"bit16_chars","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"to_u16_bounded(((bit16_chars[1]? || 0).to_u16 * (TWO_E_8)) + (bit16_chars[0]? || 0).to_u16)"}},{"id":"bit24_to_int(bit24_chars)-class-method","html_id":"bit24_to_int(bit24_chars)-class-method","name":"bit24_to_int","doc":null,"summary":null,"abstract":false,"args":[{"name":"bit24_chars","doc":null,"default_value":"","external_name":"bit24_chars","restriction":""}],"args_string":"(bit24_chars)","args_html":"(bit24_chars)","location":{"filename":"src/stumpy_bmp.cr","line_number":144,"url":null},"def":{"name":"bit24_to_int","args":[{"name":"bit24_chars","doc":null,"default_value":"","external_name":"bit24_chars","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"to_u32_bounded((((bit24_chars[2]? || 0).to_u32 * (TWO_E_16)) + ((bit24_chars[1]? || 0).to_u32 * (TWO_E_8))) + (bit24_chars[0]? || 0).to_u32)"}},{"id":"long_to_int(long_chars):UInt32-class-method","html_id":"long_to_int(long_chars):UInt32-class-method","name":"long_to_int","doc":null,"summary":null,"abstract":false,"args":[{"name":"long_chars","doc":null,"default_value":"","external_name":"long_chars","restriction":""}],"args_string":"(long_chars) : UInt32","args_html":"(long_chars) : UInt32","location":{"filename":"src/stumpy_bmp.cr","line_number":134,"url":null},"def":{"name":"long_to_int","args":[{"name":"long_chars","doc":null,"default_value":"","external_name":"long_chars","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"UInt32","visibility":"Public","body":"to_u32_bounded(((((long_chars[3]? || 0).to_u32 * (TWO_E_24)) + ((long_chars[2]? || 0).to_u32 * (TWO_E_16))) + ((long_chars[1]? || 0).to_u32 * (TWO_E_8))) + (long_chars[0]? || 0).to_u32)"}},{"id":"read(filename)-class-method","html_id":"read(filename)-class-method","name":"read","doc":null,"summary":null,"abstract":false,"args":[{"name":"filename","doc":null,"default_value":"","external_name":"filename","restriction":""}],"args_string":"(filename)","args_html":"(filename)","location":{"filename":"src/stumpy_bmp.cr","line_number":67,"url":null},"def":{"name":"read","args":[{"name":"filename","doc":null,"default_value":"","external_name":"filename","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"file = File.open(filename)\nfile_bytes = [] of UInt8\nfile_header = {} of Symbol => UInt32\nwhile (c = file.read_byte)\n  file_bytes << c\nend\nif file_bytes[FILE_IDENT_HEADER_RANGE].map(&.chr).join != FILE_IDENT_HEADER\n  raise(\"Not a BMP file\")\nend\nfile_header[:file_size] = long_to_int(file_bytes[FILE_SIZE_RANGE])\nfile_header[:rs1] = (bit16_to_int(file_bytes[FILE_RS1_RANGE])).to_u32\nfile_header[:rs2] = (bit16_to_int(file_bytes[FILE_RS2_RANGE])).to_u32\nfile_header[:offset] = long_to_int(file_bytes[FILE_OFFSET_RANGE])\nfile_header[:header_size] = long_to_int(file_bytes[IMAGE_HEADER_SIZE_RANGE])\nfile_header[:width] = long_to_int(file_bytes[IMAGE_WIDTH_RANGE])\nfile_header[:height] = long_to_int(file_bytes[IMAGE_HEIGHT_RANGE])\nfile_header[:color_planes] = (bit16_to_int(file_bytes[IMAGE_COLOR_PLANES_RANGE])).to_u32\nfile_header[:bits] = (bit16_to_int(file_bytes[IMAGE_BITS_RANGE])).to_u32\nfile_header[:compression] = long_to_int(file_bytes[IMAGE_COMPRESSION_RANGE])\nfile_header[:size] = long_to_int(file_bytes[IMAGE_SIZE_RANGE])\nfile_header[:res_x] = long_to_int(file_bytes[IMAGE_RESOLUTION_X_RANGE])\nfile_header[:res_y] = long_to_int(file_bytes[IMAGE_RESOLUTION_Y_RANGE])\nfile_header[:color_numbers] = long_to_int(file_bytes[IMAGE_COLOR_NUMBERS_RANGE])\nfile_header[:important_colors] = long_to_int(file_bytes[IMAGE_IMPORTANT_COLORS_RANGE])\ncolors = StumpyCore::Canvas.new(file_header[:width].to_i32, file_header[:height].to_i32)\nimage_data_range = (file_header[:offset]...(file_header[:offset] + ((file_header[:width] * file_header[:height]) * 3)))\n(image_data_range.size // 3).times do |p|\n  x = (p % file_header[:width]).to_i32\n  y = ((file_header[:height] - 1) - (p / file_header[:width])).to_i32\n  pos = (p / file_header[:width]) * 2\n  cr_from = to_u8_bounded((image_data_range.begin + (p * 3)) + pos)\n  cr_to = to_u8_bounded(((image_data_range.begin + (p * 3)) + 2) + pos)\n  color_bytes = bit24_to_int(file_bytes[cr_from..cr_to])\n  r = to_u8_bounded(color_bytes.bits(16..23))\n  g = to_u8_bounded(color_bytes.bits(8..15))\n  b = to_u8_bounded(color_bytes.bits(0..7))\n  colors.safe_set(x, y, StumpyCore::RGBA.from_rgb8(r, g, b))\nend\ncolors\n"}},{"id":"rgb8_to_int(rgb8_chars)-class-method","html_id":"rgb8_to_int(rgb8_chars)-class-method","name":"rgb8_to_int","doc":null,"summary":null,"abstract":false,"args":[{"name":"rgb8_chars","doc":null,"default_value":"","external_name":"rgb8_chars","restriction":""}],"args_string":"(rgb8_chars)","args_html":"(rgb8_chars)","location":{"filename":"src/stumpy_bmp.cr","line_number":153,"url":null},"def":{"name":"rgb8_to_int","args":[{"name":"rgb8_chars","doc":null,"default_value":"","external_name":"rgb8_chars","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"to_u32_bounded((((rgb8_chars[0]? || 0).to_u32 * (TWO_E_16)) + ((rgb8_chars[1]? || 0).to_u32 * (TWO_E_8))) + (rgb8_chars[2]? || 0).to_u32)"}},{"id":"to_u16_bounded(x)-class-method","html_id":"to_u16_bounded(x)-class-method","name":"to_u16_bounded","doc":null,"summary":null,"abstract":false,"args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"args_string":"(x)","args_html":"(x)","location":{"filename":"src/stumpy_bmp.cr","line_number":45,"url":null},"def":{"name":"to_u16_bounded","args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(case\nwhen x < 0\n  0\nwhen x > UInt16::MAX\n  UInt16::MAX\nelse\n  x.floor\nend).to_u16"}},{"id":"to_u32_bounded(x)-class-method","html_id":"to_u32_bounded(x)-class-method","name":"to_u32_bounded","doc":null,"summary":null,"abstract":false,"args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"args_string":"(x)","args_html":"(x)","location":{"filename":"src/stumpy_bmp.cr","line_number":56,"url":null},"def":{"name":"to_u32_bounded","args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(case\nwhen x < 0\n  0\nwhen x > UInt32::MAX\n  UInt32::MAX\nelse\n  x.floor\nend).to_u32"}},{"id":"to_u8_bounded(x)-class-method","html_id":"to_u8_bounded(x)-class-method","name":"to_u8_bounded","doc":null,"summary":null,"abstract":false,"args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"args_string":"(x)","args_html":"(x)","location":{"filename":"src/stumpy_bmp.cr","line_number":34,"url":null},"def":{"name":"to_u8_bounded","args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(case\nwhen x < 0\n  0\nwhen x > UInt8::MAX\n  UInt8::MAX\nelse\n  x.floor\nend).to_u8"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]}})